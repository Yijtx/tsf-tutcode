
================================================================================
     tsf-tutcode version 0.0.1

     https://github.com/deton/tsf-tutcode
     deton@m1.interq.or.jp
================================================================================

  Windows Vista, 7, 8 に多分対応する漢字直接入力用のIMEです。
  Text Input Processor として実装しています。
  CorvusSKK に手を入れて以下の機能を追加しています。
  ・キーシーケンスに対する機能の割り当て: aljで交ぜ書き変換開始等
  ・後置型部首合成変換
  ・後置型カタカナ変換


--------------------------------------------------------------------------------
     インストール
--------------------------------------------------------------------------------


・必須ライブラリ のインストール

  32bit版 Windows では x86 の VC++ パッケージのみを、
  64bit版 Windows では x86 と x64 の VC++ パッケージの両方を
  予めインストールして下さい。

  Microsoft Visual C++ 2012 Update3 再頒布可能パッケージ (x86)

  Microsoft Visual C++ 2012 Update3 再頒布可能パッケージ (x64)


・tsf-tutcode のインストール

  tsf-tutcode-X.Y.Z.7z を展開し、32bit版 Windows では tsf-tutcode-x86.msi、
  64bit版 Windows では tsf-tutcode-x64.msi を実行して下さい。

  （X, Y, Z はバージョン番号）


・初期設定

  設定ダイアログの「仮名」タブの「…」ボタンから、ローマ字・仮名変換表として
  tuttable.txt等を読み込ませてください。

  設定ダイアログで保存した後は、IME OFF → ON で新しい設定が反映されます。

  バージョンアップで設定項目が追加されているとき、
  機能の種類によっては設定ダイアログで一度は保存する必要があるので、
  バージョンアップしたら動かない機能がある！というときは設定ダイアログで
  OKボタンを押してみて下さい。


・Windows 8

  Windows Store アプリで使用するには、設定ファイル（config.xml）に Windows Store
  アプリへのアクセス許可を付加させる必要があります。
  Windows 8 で動作する設定ダイアログでOKボタンを押して保存を行うとアクセス許可の
  付加が自動的に行われます。


・Adobe Reader XI

  Adobe Reader で使用するには、設定ファイル（config.xml）に Adobe Reader への
  アクセス許可を付加させる必要があります。
  設定ダイアログでOKボタンを押して保存を行うとアクセス許可の付加が自動的に
  行われます。



--------------------------------------------------------------------------------
     設定
--------------------------------------------------------------------------------


・設定ダイアログ

  設定ダイアログで保存した後は、IME OFF → ON で新しい設定が反映されます。
  IME ON/OFF のキーのみ、IME ON → OFF のときにも反映されます。


・設定ファイル、SKK辞書

  各種設定及び取込済SKK辞書は、ディレクトリ %AppData%\tsf-tutcode の各ファイルに
  保存されます。

  || config.xml     || 各種設定
  || skkdict.dic    || 取込済SKK辞書
  || skkdict.idx    || 取込済SKK辞書インデックス

  各種設定の config.xml ファイルは、UTF-8 の XML フォーマットのテキストファイル
  となっており、テキストエディタで編集可能です。
  変更した後は、IME OFF → ON で新しい設定が反映されます。


・ユーザ辞書

  ユーザ辞書は、ディレクトリ %AppData%\tsf-tutcode のファイルに保存されます。

  || userdict.txt    || ユーザ辞書

  UTF-16(LE, BOMあり)のSKK辞書フォーマットとなっています。
  （送りありエントリのブロック形式を使用しない点が異なります。）

  ユーザ辞書を編集する際は、ログオンユーザ権限で動作しているサーバプロセス
  （imtutmgr.exe）をタクスマネージャなどで終了させた状態で行なって下さい。

  編集後、以下のいずれかの操作を行うとサーバプロセスが自動的に起動します。
    ・IME OFF → ON
    ・仮名漢字変換開始
    ・補完開始

  ユーザ辞書は、サーバプロセスの起動時にメモリ上に読み込まれ、
  追加、変更、削除があったとき、かつ、以下のいずれかのときに上書きされます。
    ・IME ON 状態から OFF 状態にするとき
    ・IME ON 状態のアプリケーションが終了するとき
    ・アプリケーションがフォーカスを失うとき
    ・サーバプロセス（imtutmgr.exe）が終了するとき


・動作

  || *機能*                                    || *備考*
  ----------------------------------------------------------------------------
  || 候補一覧のフォント                        || 候補一覧に表示するフォントの種類、スタイル、サイズを指定します。
  || 候補一覧の最大幅                          || 候補一覧の最大幅のサイズを指定します。
  || 候補一覧の色                              || 候補一覧の色を指定します。
  || 候補一覧表示に要する変換回数(0は表示無し) || 指定した回数変換すると候補一覧が表示されます。
  || 候補一覧が表示無しのとき候補数を表示する  || (<現在の候補の番号>/<候補数>) の形式を追加して表示します。
  || 注釈を表示する                            || <候補><セミコロン><注釈> の形式で注釈を表示します。
  || ▽▼*マークを表示しない                   || 大切なものは目に見えないようです。
  || 送り仮名が決定したとき変換を開始しない    || 送り仮名を入力したとき自動的に変換を開始しません。接頭辞も同様です。
  || 取消のとき送り仮名を削除する              || ▼モードから▽モードに遷移する際、送り仮名の部分を削除します。
  || 後退に確定を含める                        || ▼モードのとき後退すると一文字削除した上で確定します。
  ||                                           || OFFでは▼モードのとき後退は前候補と同じ機能を有します。 
  || 候補に片仮名変換を追加する                || 見出し語を片仮名に変換した候補を追加します。
  || 没入型で入力モードを表示する              || Windowsストアアプリ(没入型のアプリ)で入力モードを表示します。
  ||                                           || タイミングは、IME ON、入力モード変更、「*無効*」キー押下、フォーカスのときです。


・SKK辞書

  設定ダイアログのリストに交ぜ書き変換辞書を追加し、取込ボタンを押して下さい。
  取込済SKK辞書に変換されて、使用可能となります。
  SKK辞書ファイルの文字コードは、EUC-JIS-2004、UTF-16(LE, BOMあり)、
  UTF-8(BOMあり)に対応しています。

  漢直Win等のkwmaze.dicを取込むには、文字コードをUTF-8等に変換した後、
  以下の2行をファイルの先頭に挿入しておいてください。
;; okuri-ari entries.
;; okuri-nasi entries.


・候補一覧選択キー

  候補一覧での確定は、デフォルトで 1～7 と ASDFJKL と asdfjkl を使用します。
  コマンドプロンプト等では、デフォルトで 1～9 と ASDFJKLGH と asdfjklgh を使用
  します。
  候補一覧が表示されているとき、Kanaキーロックは無視されます。

  || 数字 || 選択キー（1～9で固定）
  || 表示 || 選択キー（必須、候補一覧の表示にも使用）
  || 予備 || 選択キー（空でもOK）


・キー設定（ON/OFF）

  IME ON/OFF のキーを指定します。
  仮想キーコード、Alt、Control、Shift の組合せを設定して下さい。
  仮想キーコードの詳細はこちらを参照下さい。 http://msdn.microsoft.com/en-us/library/dd375731
  最大で8行です。


・キー設定（文字）、キー設定（仮想キー）

  各機能に対してキーを正規表現で設定して下さい。
  Visual C++ 2010 の TR1 正規表現で、文法は ECMAScript を使用しています。
  正規表現の詳細はこちらを参照下さい。 http://msdn.microsoft.com/en-us/library/bb982727(v=vs.100).aspx

  無効な正規表現で設定するとその機能は無効となります。警告等は表示されません。
  文字として認識される場合はキー設定（文字）のほうが優先されます。
  キー設定（文字）には ASCII の範囲内の文字を設定出来ます。


・キー設定デフォルト

  キー設定 ON/OFF

  || *機能*     || *キー*                 || *備考*
  ----------------------------------------------------------------------------
  || ON / OFF   || Alt+`                  || 0xC0 + Alt
  ||            || 漢字                   || 0x19
  ||            || (Alt+半角/全角  Alt+`) || 0x19
  ||            || 半角/全角(Ctrl+`)      || 0xF3, 0xF4

  キー設定（文字）

  || *機能*     || *キー*                 || *備考*
  ----------------------------------------------------------------------------
  || かな／カナ ||                        || ひらがな／カタカナモード、かなカナ変換
  || ｶﾅ全英変換 ||                        || ひらがなカタカナ→半角カタカナ変換、abbrev→全角英数字変換
  || 全英       ||                        || 全英モード
  || ASCII      ||                        || アスキーモード
  || ひらがな   || Ctrl+j  Ctrl+q         || ひらがなモード
  || abbrev     ||                        || abbrevモード
  || 接辞       ||                        || 接頭辞・接尾辞
  || 次候補     || Space  Ctrl+n          || 辞書検索開始、次候補
  || 前候補     || Ctrl+p                 || 「後退」のキーも使用可
  || 辞書削除   || Ctrl+x                 || 確認を求めない
  || 次補完     || Ctrl+i(Tab)            || 補完開始、次見出し語候補
  || 前補完     || Ctrl+u                 || 前見出し語候補
  || 変換位置   ||                        || 変換位置指定
  || 直接入力   ||                        || 見出し語入力でローマ字仮名変換しない
  || 確定       || Ctrl+m(Return)  Ctrl+j || 
  || 取消       || Ctrl+g  Ctrl+[(Escape) || 
  || 後退       || Ctrl+h(BS)             || 
  || 削除       || Ctrl+d  DEL(Ctrl+BS)   || 
  || *無効*     || Ctrl+j                 || アプリケーション側に非通知、辞書登録の確定無効
  || 左移動     || Ctrl+b                 || 
  || 先頭移動   || Ctrl+a                 || 
  || 右移動     || Ctrl+f                 || 
  || 末尾移動   || Ctrl+e                 || 
  || 貼付       || Ctrl+y  Ctrl+v         || クリップボードの文字列を貼り付け

  キー設定（仮想キー）

  || *機能*     || *キー*                 || *備考*
  ------------------------------------------------------------------------
  || かな／カナ ||                        || ひらがな／カタカナモード、かなカナ変換
  || ｶﾅ全英変換 ||                        || ひらがなカタカナ→半角カタカナ変換、abbrev→全角英数字変換
  || 全英       ||                        || 全英モード
  || ASCII      ||                        || アスキーモード
  || ひらがな   ||                        || ひらがなモード
  || abbrev     ||                        || abbrevモード
  || 接辞       ||                        || 接頭辞・接尾辞
  || 次候補     ||                        || 辞書検索開始、次候補
  || 前候補     ||                        || 「後退」のキーも使用可
  || 辞書削除   ||                        || 確認を求めない
  || 次補完     ||                        || 補完開始、次見出し語候補
  || 前補完     ||                        || 前見出し語候補
  || 変換位置   ||                        || 変換位置指定
  || 直接入力   ||                        || 見出し語入力でローマ字仮名変換しない（不使用）
  || 確定       ||                        || 
  || 取消       ||                        || 
  || 後退       ||                        || 
  || 削除       || 0x2E (Delete)          || 
  || *無効*     ||                        || アプリケーション側に非通知、辞書登録の確定無効
  || 左移動     || 0x25 (カーソル左)      || 
  || 先頭移動   || 0x26 (カーソル上)      || 
  || 右移動     || 0x27 (カーソル右)      || 
  || 末尾移動   || 0x28 (カーソル下)      || 
  || 貼付       ||                        || クリップボードの文字列を貼り付け


・ローマ字・仮名変換表

  ローマ字、平仮名、片仮名、所謂半角片仮名、促音/撥音(ん)、待機の組み合せを
  指定します。

  「促／ん」がONのとき、仮名が決定したあとに最後の入力文字が入力状態となります。

  「待機」がONのとき、入力した文字をローマ字仮名変換した結果（変換出来ないときは
  入力した文字そのまま）がローマ字として扱われ、辞書検索開始、確定、補完開始、
  ローマ字に設定されていない組み合わせ、のいずれかになるまで仮名の最終的な決定が
  遅延されます。

  最大で32768行です。

  「…」ボタンから、ファイルオープンダイアログによりKanaTableファイルを
  読み込むことが出来ます。

  KanaTableファイル仕様
    ・文字コード：UTF-16(LE,BOMあり) または UTF-8(BOMあり) または ANSI(CP932)
    ・改行：CR+LF
    ・フォーマット：<ローマ字><\t><ひらがな><\t><カタカナ><\t><カタカナ(半角)><\t><[促/ん]/[待機]><\r><\n>
       ・<ローマ字>、<ひらがな>、<カタカナ>、<カタカナ(半角)>は、
         それぞれUTF-16換算で最大14バイトです。
       ・[促/ん]は、ONのとき1、OFFのとき0です。
       ・[待機]は、ONのとき2、OFFのとき0です。
       ・<[促/ん]|[待機]>は、[促/ん]と[待機]の両方がONのとき3となりますが、
         [待機]のほうが優先されます。（0のときは無しでも可）
       ・空行やタブのみの行は読み飛ばされます。
       ・<\t>、<\r>、<\n>は、それぞれタブ、改行コードに読み替えて下さい。
    ・例１）a<\t>あ<\t>ア<\t>ｱ<\r><\n>
    ・例２）nn<\t>ん<\t>ン<\t>ﾝ<\t>0<\r><\n>
    ・例３）np<\t>ん<\t>ン<\t>ﾝ<\t>1<\r><\n>
    ・例４）ｺ<\t>こ<\t>コ<\t>ｺ<\t>2<\r><\n>


・ASCII・全英変換表

  ASCII、全英文字の組み合せを指定します。最大で128行です。



--------------------------------------------------------------------------------
     その他
--------------------------------------------------------------------------------


・Unicodeコードポイント入力

  「U+XXXXXX」( コードポイント XXXXXX : 0000-FFFF または 10000-10FFFF ) または
  「uxxxxxx」( コードポイント xxxxxx : 0000-ffff または 10000-10ffff ) の
  フォーマットで変換して下さい。
  例１）「▽U+30A2」→「▼ア」
  例２）「▽u30a2」→「▼ア」


・JIS X 0213 面区点番号入力

  「X-YY-ZZ」( 面 X : 1-2、 区 YY : 01-94、点 ZZ: 01-94 ) のフォーマットで
  変換して下さい。Unicodeコードポイントが注釈として付加されます。
  例）「▽1-05-02」→「▼ア;U+30A2」


・開発環境

  Surrounding Text関係は、Mozcから一部ソースを取り込んでいます。
  部首合成変換は、漢直Winから一部ソースを取り込んでいます。

  Visual Studio 2012
  WiX 3.7
